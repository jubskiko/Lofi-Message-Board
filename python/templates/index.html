<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" sizes="48x48" href="../static/favicon.png">
  <script type="text/javascript" src="../static/javascript/form.js"></script>
  <script type="text/javascript">
    function createTopic() {
      formContent = new FormData();
      formContent.append('title', document.getElementById('title-submit').value)
      formContent.append('body', document.getElementById('body-submit').value)
      if (formContent.get('title') !== '') {
        sendForm("/maketopic", formContent);
      } else {
        alert('Can\'t send an empty title!');
      }
    }

    function unhideForm() {
      document.querySelectorAll('.hidden').forEach((el) => {
        if (el.classList.contains('newtopic')) {
          el.classList.remove("hidden");
        }
      });
      const addBtn = document.getElementById('newtopic-button');
      addBtn.classList.add("hidden");
    }

    function hidePost() {
      const el = document.querySelector('.hidden');
      el.classList.remove("hidden");
      const addBtn = document.querySelector('.input');
      addBtn.classList.add("hidden");
    }
  </script>
  <title>{{ title }}</title>
  <link rel="stylesheet" href="../static/css/index.css">
</head>

<body>
  <div id="center">
    <h1 class="title">{{ title }}</h1>
    <button id="newtopic-button" onclick="unhideForm()">New Post</button>
    <form class="input hidden newtopic">
      <input name="title" type="text" title="Post title" id="title-submit">
      <br>
      <br>
      <textarea name="body" id="body-submit"></textarea>
    </form>
    <button class="hidden newtopic" onclick="createTopic()">Create Topic</button>
    <h2>Posts</h2>
    <div id="posts">
      {% for post in posts %}
      <a href="{{ url_for('viewtopic', id=post.uuid) }}">{{ post.title }}</a><br>
      {% endfor %}
    </div>
  </div>
  <script>

  </script>

</body>

</html>
